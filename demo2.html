<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>



    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">


    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>


    <link rel="stylesheet" href="./assets/css/demo2.css">
</head>

<body class="bg-color text-white">
    <div class="w-100 bg-color text-center d-flex align-items-center justify-content-center"
        style="height: 40px; margin-bottom: 3px; cursor: default;">
        <a href="/">
            <img src="./assets/images/logo/logo-no-background-blue.png" style="height: 30px;" alt="" srcset="">
        </a>
    </div>
    <div class="container-fluid">
        <div class="row gx-2">
            <div class="col-12 col-md-3 col-xl-2 mb-3 mb-md-0" style="height: calc(100vh - 43px); cursor: default;">
                <div id="appModel" class="h-50">
                    <h6 class="text-center mb-3 mt-2" style="color: #ccc; height: 30px;">MODEL</h6>
                    <div class="row g-1" style="font-size: 16px;overflow-y: auto;height: calc(100% - 30px);">
                        <div class="col-4 col-md-6 product">
                            <img class="mw-100 mh-100" src="./assets/images/products/1.webp" alt="" srcset="">
                        </div>
                        <div class="col-4 col-md-6 product">
                            <img class="mw-100 mh-100" src="./assets/images/products/2.webp" alt="" srcset="">
                        </div>
                    </div>
                </div>
                <div class="border-top my-3"></div>
                <div id="appBackground" class="h-50">
                    <div style="height: 80px;">
                        <h6 class="text-center mb-2 mt-2" style="color: #ccc;">BACKGROUND</h6>
                        <ul class="nav nav-pills mb-2 d-flex justify-content-between" id="pills-tab" role="tablist">
                            <li class="nav-item" style="width: 48%;" role="presentation">
                                <button style="font-size: 11px; letter-spacing: 1px;"
                                    class="w-100 nav-link active button-universe mt-1 mb-1" data-bs-toggle="pill"
                                    data-bs-target="#pills-background-image" type="button" role="tab"
                                    aria-controls="pills-background-image" aria-selected="false">Hình ảnh</button>
                            </li>
                            <li class="nav-item" style="width: 48%;" role="presentation">
                                <button style="font-size: 11px; letter-spacing: 1px;"
                                    class="w-100 nav-link button-universe mt-1 mb-1" data-bs-toggle="pill"
                                    data-bs-target="#pills-background-color" type="button" role="tab"
                                    aria-controls="pills-background-color" aria-selected="true">Đơn màu</button>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-content h-75 mh-75" id="pills-tabContent" style="overflow-y: auto; height: calc(100% - 80px);">
                        <div class="tab-pane fade show active" id="pills-background-image" role="tabpanel">
                            <div class="form-check form-switch d-flex align-items-center justify-content-start p-0">
                                <input class="form-check-input mt-0 mx-0" type="checkbox"
                                    id="flexSwitchCheckDefaultToanCanh">
                                <label class="form-check-label mx-1" for="flexSwitchCheckDefaultToanCanh"
                                    style="font-size: 10px;">Toàn cảnh</label>
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <input style="box-shadow: none;" type="text" class="form-control form-control-sm"
                                    placeholder="Tìm kiếm hình ảnh" aria-describedby="button-search-image-bg"
                                    v-model="data.querySearch" v-on:keyup.enter="SearchImages()">
                                <button class="btn btn-outline-primary" type="button" id="button-search-image-bg"
                                    v-on:click="SearchImages()">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </button>
                            </div>
                            <div class="row mt-2 w-100 justify-content-center mx-0">
                                <!--data-masonry='{"percentPosition": true}'!-->
                                <img style="max-width: 100%;" class="col-4 px-1 py-1" v-for="image in listImages"
                                    v-bind:src="image" v-bind:alt="image" v-bind:srcset="image">
                            </div>
                        </div>
                        <div class="tab-pane fade" id="pills-background-color" role="tabpanel">
                            <input style="height: 100px;" type="color" class="form-control form-control-color w-100" v-model="data.backgroundColor"
                             title="Chọn màu nền" v-on:change="ChangeBackground(2)">
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-12 col-md-6 col-xl-8" style="height: calc(100vh - 40px - 3px);">
                <model-viewer id="model-main" class="w-100 h-100" alt=""
                    src="./assets/model-glb/cresent_witch_clothes.glb" ar shadow-intensity="1" camera-controls
                    disable-tap auto-rotate autoplay>
                </model-viewer>
            </div>
            <div class="col-12 col-md-3 col-xl-2 mt-3 mt-md-0"
                style="max-height: calc(100vh - 40px - 3px); overflow-y: auto; cursor: default;">
            </div>
        </div>
        <div class="menu-customize h-100" style="z-index: 2; opacity: 0.8;">

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"
        integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous"
        async></script>
    <!--vue2 development-->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <!--vue production-->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2"></script> -->

    <script>
        var model = document.getElementById('#model-main');
    </script>

    <script type="module" defer>

        import { SearchImages } from './assets/js/search-image.js';
        // console.log(await SearchImages('cat', 10, 1));

        //change background model
        var appBackground = new Vue({
            el: "#appBackground",
            data: {
                data: {},
                listImages: [],
                type: 2 //0-toàn cảnh, 1-hình ảnh, 2 đơn màu
            },
            methods: {
                init: async function () {

                    this.data.backgroundColor = 'transparent';
                    this.data.backgroundImage = '';
                    this.data.skyBoxImage = '';
                    this.data.querySearch = '';


                    this.$forceUpdate();
                },
                SearchImages: async function () {
                    this.listImages = await SearchImages(this.data.querySearch, 12, 1);
                    this.listImages = this.listImages.map(e => e.url = 'https://images.unsplash.com/' + e.url + '?auto=format&fit=crop&w=480&q=80');
                    console.log(this.listImages);
                },
                ChangeBackground: function (bg){
                    var model = document.getElementById('#model-main');
                    console.log(model)
                    var self = this;
                    if(self.type==0){

                    }
                    else if(self.type==1){

                    }
                    else{
                        model.style.backgroundColor = self.data.backgroundColor;
                    }
                }

            },
            mounted() {
                this.init();
            },
            computed: {

            }
        })
    </script>





    <script type="module">

        const modelViewer = document.querySelector("model-viewer#model-main");

        modelViewer.addEventListener("load", () => {

            let materials = modelViewer.model.materials;
            console.log(materials[0]);

            const changeColor = (event) => {
                const material = modelViewer.materialFromPoint(event.clientX, event.clientY);
                if (material != null) {
                    material.pbrMetallicRoughness.setBaseColorFactor([Math.random(), Math.random(), Math.random()]);
                }
            };

            modelViewer.addEventListener("click", changeColor);
        });


    </script>



</body>

</html>